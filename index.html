<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"/>
		<link rel="stylesheet" href="css/L.Control.Locate.min.css">
        <link rel="stylesheet" href="css/qgis2web.css">
		<link rel="stylesheet" href="css/fontawesome-all.min.css">
        <link rel="stylesheet" href="css/leaflet-control-geocoder.Geocoder.css">
        <link rel="stylesheet" href="css/leaflet-measure.css">



		<!-- CodeMirror -->
		<link rel="stylesheet" href="codemirror/codemirror.css">
		

		
		
        <style>
		

		
		html {
			margin: 0;
			padding: 0;
			font-family: Times, Arial, sans-serif;

		}
		
		body{
			margin: 0;
			padding: 0;
			font-family: Times, Arial, sans-serif;

			background-image: url('images/bajo_el_agua.jpg');
		}

		.caja {
			display: block;
			float:left;
			width: 18%;
			margin: 0%;
			padding: 1%;
			text-align: justify;



		}
		
		.cajamap {
			display: block;
			float:right;
			width: 78%;
			height: 100%;
			margin: 1%;
			padding: 0%;
			border: 0px solid #999999;
			
		}


		
		#map {
			width: 100%;
			height: 100%;
			
		}
		h1 {
			margin: 0;
			text-align: left;
			padding: 10px;


		}
		h2 {
			margin-bottom: 5px;
		}
		h3 {
			margin: 0;
			text-align: center;
			padding: 1px;
	
		}
		h6 {
			color: #C0D4D5
		}
		textarea {
			float: center;
			padding: 1%;
			clear: both;
			width: 100%;
			height: 150px;
			font-family: Times;
			text-align: left;

		}
		
		#cargar {
			margin: 5px 0 0 0;
			font-size: 1em;
			font-family: Times;
		}
		.CodeMirror2 {
			border: 1px solid #eee;
			font-size: 1.2em;
			height: auto;
			font-family: monospace;
		}

		

        </style>
        <title>Mapa de Salinidad</title>
    </head>
    <body>
	
				<h1>Mapa de Salinidad - Universidad del Valle</h1>

		<div class="caja">
			<div id="controles">
				<h3>Sensor de Salinidad</h3>

				
				
<p>Este visor web contiene la elaboración del instrumento de monitoreo de salinidad por medio de sensores de bajo costo, donde se tiene que el instrumento puede sensar variables ambientales y georreferenciar el lugar de la toma del dato, por lo que esto facilita la descripción de características del lugar donde se esté tomando los datos permitiendo contemplar un panorama amplio de la realidad mediante un visor web.</p>
<p>El sensor está compuesto por los siguientes intrumentos:
<ul>
	<li><a href="https://www.arduino.cc/en/Guide/ArduinoUno"> Arduino Uno</a></li>
	<li><a href="https://www.alldatasheet.com/datasheet-pdf/pdf/58557/DALLAS/DS18B20.html">Termometro Digital DS18B20</a></li>
	<li><a href="http://www.bolanosdj.com.ar/MOVIL/ARDUINO2/MedidorHumedadSuelo.pdf">Sensor de Humedad FC-28</a></li>
	<li><a href="https://github.com/jalderman9/Dashcam_HAT/find/master">Modulo G28u7fttl</a></li>
</ul>
</p>		
				
				
<h3>Introduzca los datos CSV</h3>
			
				<textarea id="csv">
3.37583;-76.53231;Sal;37°
3.37683;-76.53131;Sal;37°
3.3543;-76.53031;Sal;37°
3.37783;-76.54231;Sal;37°
				</textarea>
				<button id="cargar">Cargar Datos CSV</button>


		
<h6>Universidad del Valle<br>
Facultad de Ingeniería<br>
Escuela de Ingeniería Civil y Geomática<br>
Ingenieria Topografica<br><br>
Contáctanos<br>
Jose Miguel Vera Saavedra &nbsp;&nbsp; <a href="https://www.facebook.com/miguel.vera.9026?ref=bookmarks">
							<img src="images/facebook.png" style="width:12px;height:12px;border:0"></a>&nbsp; 
							<a href="https://www.instagram.com/miguel0201/?hl=es-la">
							<img src="images/instagram.jpg" style="width:12px;height:12px;border:0"></a>&nbsp; 
							<a href="https://twitter.com/vera_9421">
							<img src="images/twitter.png" style="width:12px;height:12px;border:0"></a> 
							
							<br>
Vanessa Hernandez Bedoya &nbsp; <a href="https://www.facebook.com/vanessa14s">
							<img src="images/facebook.png" style="width:12px;height:12px;border:0"></a>&nbsp; 
							<a href="https://www.instagram.com/vanessa14s_/?hl=es-la">
							<img src="images/instagram.jpg" style="width:12px;height:12px;border:0"></a>&nbsp; 
							<a href="https://twitter.com/vanebed14">
							<img src="images/twitter.png" style="width:12px;height:12px;border:0"></a> 

</h6>
		</div>
		</div>

		<div class="cajamap">
			<div id="map"></div>
		</div>
		

	
			<textarea id="opciones" readonly=true>
L.geoCsv(null,{
  titles: ['lat', 'lng', 'Salinidad', 'Temperatura'],
  fieldSeparator: ';',
  lineSeparator: '\n',
  deleteDobleQuotes: true,
  firstLineTitles: false,
  onEachFeature: function (feature, layer) {
    var popup = '';
    for (var clave in feature.properties) {
      var title = geo_csv.getPropertyTitle(clave);
      popup += '<b>'+title+'</b><br />'+feature.properties[clave]+'<br /><br />';
    }
    layer.bindPopup(popup);
  }
});</textarea>



       
        <script src="js/qgis2web_expressions.js"></script>
        <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
		<script src="js/L.Control.Locate.min.js"></script>
        <script src="js/leaflet-svg-shape-markers.min.js"></script>
        <script src="js/leaflet.rotatedMarker.js"></script>
        <script src="js/leaflet.pattern.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <script src="js/leaflet-control-geocoder.Geocoder.js"></script>
        <script src="js/leaflet-measure.js"></script>
        <script src="data/ZonaA_1.js"></script>
        <script src="data/ZonaB_2.js"></script>
        <script src="data/ZonaC_3.js"></script>
        <script src="data/ZonaD_4.js"></script>
        <script src="data/ZonaE_5.js"></script>
        <script src="data/DatosdelSensor_6.js"></script>
        <script src="data/Vas_7.js"></script>
        <script src="data/Edificaciones_8.js"></script>
		<script src="data/mc_comunas_1.js"></script>
		<script src="dist/leaflet.browser.print.min.js"></script>
		<script src="codemirror/codemirror.js"></script>
		<script src="codemirror/codemirror2.js"></script>
		<script src="codemirror/util/matchbrackets.js"></script>
		<script src="codemirror/mode-javascript.js"></script>
		<!-- GeoCSV: https://github.com/joker-x/Leaflet.geoCSV -->
		<script src="leaflet.geocsv-src.js"></script>

        <script>
//codemirror
var opciones_editor = CodeMirror.fromTextArea(document.getElementById("opciones"), {
  lineNumbers: false,
  matchBrackets: true,
  mode: "text/typescript"});

var csv_editor = CodeMirror.fromTextArea(document.getElementById("csv"), {lineNumbers: true});

//dotamos de funcionalidad al botón cargar
var geo_csv = {};

function cargar() {
  //guardamos los cambios del usuario en sus respectivos textarea
  opciones_editor.save();
  csv_editor.save();
  //borramos la capa geo_csv del mapa
  map.removeLayer(geo_csv);
  //recreamos la capa con las nuevas opciones
  geo_csv = eval(document.getElementById('opciones').value);
  geo_csv.addData(document.getElementById('csv').value);
  map.addLayer(geo_csv);
}

document.getElementById('cargar').addEventListener('click', cargar, false);
        
		


		//altura del mapa al tamaño de los controles, dos columnas iguales
		function ajusta_Altura() {
			var altura = document.getElementById('controles').offsetHeight
				document.getElementById('map').style.height = altura+0+"px";
				}

		ajusta_Altura();

		
		
		var map = L.map('map', {
            zoomControl:true, maxZoom:28, minZoom:1
        });

		

		
		//capa wms
		var estaciones_mio=L.tileLayer.wms('http://ws-idesc.cali.gov.co:8081/geoserver/metrocali/wms?service=WMS&version=1.1.0',{layers:'metrocali:sitm_estaciones'}).addTo(map);
		
		//plugin imprimir
		L.control.browserPrint().addTo(map);


		//icono en el mapa
		var greenIcon = L.icon({ 
			iconUrl: 'legend/punto.png',
			//shadowUrl: 'legend/punto.png',

			iconSize:     [16, 16], // size of the icon
			//shadowSize:   [50, 64], // size of the shadow
			iconAnchor:   [16, 16], // point of the icon which will correspond to marker's location
			//shadowAnchor: [4, 62],  // the same for the shadow
			//popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor
});
		
		

		var estiloPopup = {'maxWidth': '300'} //Estilo Popup
 
			var iconoBase = L.Icon.extend({
					options: {
							iconSize:     [24, 39],
							iconAnchor:   [16, 87],
							popupAnchor:  [-3, -76]
					}
			});
		//Punto en el mapa
		var punto = L.marker([3.37583,-76.53231], {icon: greenIcon}).bindPopup("<h1>Punto En El Mapa</h2>",estiloPopup).addTo(map); //creacion del punto y adicion del popup
		//circulo en el mapa
		var circulo = L.circle([3.37583,-76.52231], 500, {
			color: 'red',
			fillColor: '#f03',
			fillOpacity: 0.5
		}).addTo(map).bindPopup("Circulo sobre el mapa");
		//poligono en el mapa
		var poligono = L.polygon([
			[3.42217,-76.49000],
			[3.41583,-76.53231],
			[3.40000,-76.52231],
			[3.38000,-76.52831]
			],{color: 'green'}).addTo(map).bindPopup("Poigono en el Mapa");
		
		
		var hash = new L.Hash(map);
        map.attributionControl.setPrefix('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> &middot; <a href="https://qgis.org">QGIS</a>');
        L.control.locate({locateOptions: {maxZoom: 19}}).addTo(map);
        var measureControl = new L.Control.Measure({
            position: 'topleft',
            primaryLengthUnit: 'meters',
            secondaryLengthUnit: 'kilometers',
            primaryAreaUnit: 'sqmeters',
            secondaryAreaUnit: 'hectares'
        });
        measureControl.addTo(map);
        document.getElementsByClassName('leaflet-control-measure-toggle')[0]
        .innerHTML = '';
        document.getElementsByClassName('leaflet-control-measure-toggle')[0]
        .className += ' fas fa-ruler';
        var bounds_group = new L.featureGroup([]);
        function setBounds() {
            if (bounds_group.getLayers().length) {
                map.fitBounds(bounds_group.getBounds());
            }
        }
		
		//Agrego otro mapa base
		
		var mapa_base = L.tileLayer.wms('http://ows.mundialis.de/services/service?', {layers: 'OSM-Overlay-WMS'});
		
		
        var layer_OpenStreetMap_0 = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            opacity: 1.0,
            attribution: '',
            minZoom: 1,
            maxZoom: 28,
            minNativeZoom: 0,
            maxNativeZoom: 19
        });
        layer_OpenStreetMap_0;
        map.addLayer(layer_OpenStreetMap_0);
        function pop_ZonaA_1(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Id'] !== null ? Autolinker.link(feature.properties['Id'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['zona'] !== null ? Autolinker.link(feature.properties['zona'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }
		
		// Capa comunas en json
        function pop_mc_comunas_1(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['comuna'] !== null ? Autolinker.link(feature.properties['comuna'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>nombre</strong><br />' + (feature.properties['nombre'] !== null ? Autolinker.link(feature.properties['nombre'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['zona_recol'] !== null ? Autolinker.link(feature.properties['zona_recol'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['area'] !== null ? Autolinker.link(feature.properties['area'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['perimetro'] !== null ? Autolinker.link(feature.properties['perimetro'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_mc_comunas_1_0() {
            return {
                pane: 'pane_mc_comunas_1',
                opacity: 1,
                color: 'rgba(255,127,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(114,155,111,0.0)',
                interactive: true,
            }
        }
        map.createPane('pane_mc_comunas_1');
        map.getPane('pane_mc_comunas_1').style.zIndex = 401;
        map.getPane('pane_mc_comunas_1').style['mix-blend-mode'] = 'normal';
        var layer_mc_comunas_1 = new L.geoJson(json_mc_comunas_1, {
            attribution: '',
            interactive: true,
            dataVar: 'json_mc_comunas_1',
            layerName: 'layer_mc_comunas_1',
            pane: 'pane_mc_comunas_1',
            onEachFeature: pop_mc_comunas_1,
            style: style_mc_comunas_1_0,
        });
        bounds_group.addLayer(layer_mc_comunas_1);
        map.addLayer(layer_mc_comunas_1);

		
		// fin de configuracion de comunas_json
		
        function style_ZonaA_1_0() {
            return {
                pane: 'pane_ZonaA_1',
                opacity: 0.5,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(179,1,255,1.0)',
                interactive: true,
            }
        }
        map.createPane('pane_ZonaA_1');
        map.getPane('pane_ZonaA_1').style.zIndex = 401;
        map.getPane('pane_ZonaA_1').style['mix-blend-mode'] = 'normal';
        var layer_ZonaA_1 = new L.geoJson(json_ZonaA_1, {
            attribution: '',
            interactive: true,
            dataVar: 'json_ZonaA_1',
            layerName: 'layer_ZonaA_1',
            pane: 'pane_ZonaA_1',
            onEachFeature: pop_ZonaA_1,
            style: style_ZonaA_1_0,
        });
        bounds_group.addLayer(layer_ZonaA_1);
        map.addLayer(layer_ZonaA_1);
		
		
        function pop_ZonaB_2(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Id'] !== null ? Autolinker.link(feature.properties['Id'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['zona'] !== null ? Autolinker.link(feature.properties['zona'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_ZonaB_2_0() {
            return {
                pane: 'pane_ZonaB_2',
                opacity: 0.5,
                color: 'rgba(35,35,35,1)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(36,164,29,1.0)',
                interactive: true,
            }
        }
        map.createPane('pane_ZonaB_2');
        map.getPane('pane_ZonaB_2').style.zIndex = 402;
        map.getPane('pane_ZonaB_2').style['mix-blend-mode'] = 'normal';
        var layer_ZonaB_2 = new L.geoJson(json_ZonaB_2, {
            attribution: '',
            interactive: true,
            dataVar: 'json_ZonaB_2',
            layerName: 'layer_ZonaB_2',
            pane: 'pane_ZonaB_2',
            onEachFeature: pop_ZonaB_2,
            style: style_ZonaB_2_0,
        });
        bounds_group.addLayer(layer_ZonaB_2);
        map.addLayer(layer_ZonaB_2);
        function pop_ZonaC_3(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Id'] !== null ? Autolinker.link(feature.properties['Id'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['zona'] !== null ? Autolinker.link(feature.properties['zona'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_ZonaC_3_0() {
            return {
                pane: 'pane_ZonaC_3',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,127,0,1.0)',
                interactive: true,
            }
        }
        map.createPane('pane_ZonaC_3');
        map.getPane('pane_ZonaC_3').style.zIndex = 403;
        map.getPane('pane_ZonaC_3').style['mix-blend-mode'] = 'normal';
        var layer_ZonaC_3 = new L.geoJson(json_ZonaC_3, {
            attribution: '',
            interactive: true,
            dataVar: 'json_ZonaC_3',
            layerName: 'layer_ZonaC_3',
            pane: 'pane_ZonaC_3',
            onEachFeature: pop_ZonaC_3,
            style: style_ZonaC_3_0,
        });
        bounds_group.addLayer(layer_ZonaC_3);
        map.addLayer(layer_ZonaC_3);
        function pop_ZonaD_4(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Id'] !== null ? Autolinker.link(feature.properties['Id'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['zona'] !== null ? Autolinker.link(feature.properties['zona'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_ZonaD_4_0() {
            return {
                pane: 'pane_ZonaD_4',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(166,206,227,1.0)',
                interactive: true,
            }
        }
        map.createPane('pane_ZonaD_4');
        map.getPane('pane_ZonaD_4').style.zIndex = 404;
        map.getPane('pane_ZonaD_4').style['mix-blend-mode'] = 'normal';
        var layer_ZonaD_4 = new L.geoJson(json_ZonaD_4, {
            attribution: '',
            interactive: true,
            dataVar: 'json_ZonaD_4',
            layerName: 'layer_ZonaD_4',
            pane: 'pane_ZonaD_4',
            onEachFeature: pop_ZonaD_4,
            style: style_ZonaD_4_0,
        });
        bounds_group.addLayer(layer_ZonaD_4);
        map.addLayer(layer_ZonaD_4);
        function pop_ZonaE_5(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Id'] !== null ? Autolinker.link(feature.properties['Id'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['zona'] !== null ? Autolinker.link(feature.properties['zona'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_ZonaE_5_0() {
            return {
                pane: 'pane_ZonaE_5',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(251,255,1,1.0)',
                interactive: true,
            }
        }
        map.createPane('pane_ZonaE_5');
        map.getPane('pane_ZonaE_5').style.zIndex = 405;
        map.getPane('pane_ZonaE_5').style['mix-blend-mode'] = 'normal';
        var layer_ZonaE_5 = new L.geoJson(json_ZonaE_5, {
            attribution: '',
            interactive: true,
            dataVar: 'json_ZonaE_5',
            layerName: 'layer_ZonaE_5',
            pane: 'pane_ZonaE_5',
            onEachFeature: pop_ZonaE_5,
            style: style_ZonaE_5_0,
        });
        bounds_group.addLayer(layer_ZonaE_5);
        map.addLayer(layer_ZonaE_5);
        function pop_DatosdelSensor_6(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <th scope="row">id</th>\
                        <td>' + (feature.properties['id'] !== null ? Autolinker.link(feature.properties['id'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">coor_x</th>\
                        <td>' + (feature.properties['coor_x'] !== null ? Autolinker.link(feature.properties['coor_x'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">coor_y</th>\
                        <td>' + (feature.properties['coor_y'] !== null ? Autolinker.link(feature.properties['coor_y'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">temp</th>\
                        <td>' + (feature.properties['temp'] !== null ? Autolinker.link(feature.properties['temp'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">condc</th>\
                        <td>' + (feature.properties['condc'] !== null ? Autolinker.link(feature.properties['condc'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_DatosdelSensor_6_0() {
            return {
                pane: 'pane_DatosdelSensor_6',
                shape: 'diamond',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(50,87,128,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 2.0,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(72,123,182,1.0)',
                interactive: true,
            }
        }
        map.createPane('pane_DatosdelSensor_6');
        map.getPane('pane_DatosdelSensor_6').style.zIndex = 406;
        map.getPane('pane_DatosdelSensor_6').style['mix-blend-mode'] = 'normal';
        var layer_DatosdelSensor_6 = new L.geoJson(json_DatosdelSensor_6, {
            attribution: '',
            interactive: true,
            dataVar: 'json_DatosdelSensor_6',
            layerName: 'layer_DatosdelSensor_6',
            pane: 'pane_DatosdelSensor_6',
            onEachFeature: pop_DatosdelSensor_6,
            pointToLayer: function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.shapeMarker(latlng, style_DatosdelSensor_6_0(feature));
            },
        });
        bounds_group.addLayer(layer_DatosdelSensor_6);
        map.addLayer(layer_DatosdelSensor_6);
        function pop_Vas_7(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['osm_id'] !== null ? Autolinker.link(feature.properties['osm_id'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['name'] !== null ? Autolinker.link(feature.properties['name'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['ref'] !== null ? Autolinker.link(feature.properties['ref'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['type'] !== null ? Autolinker.link(feature.properties['type'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['oneway'] !== null ? Autolinker.link(feature.properties['oneway'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['bridge'] !== null ? Autolinker.link(feature.properties['bridge'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['tunnel'] !== null ? Autolinker.link(feature.properties['tunnel'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['maxspeed'] !== null ? Autolinker.link(feature.properties['maxspeed'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_Vas_7_0() {
            return {
                pane: 'pane_Vas_7',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'square',
                lineJoin: 'bevel',
                weight: 1.0,
                fillOpacity: 0,
                interactive: true,
            }
        }
        map.createPane('pane_Vas_7');
        map.getPane('pane_Vas_7').style.zIndex = 407;
        map.getPane('pane_Vas_7').style['mix-blend-mode'] = 'normal';
        var layer_Vas_7 = new L.geoJson(json_Vas_7, {
            attribution: '',
            interactive: true,
            dataVar: 'json_Vas_7',
            layerName: 'layer_Vas_7',
            pane: 'pane_Vas_7',
            onEachFeature: pop_Vas_7,
            style: style_Vas_7_0,
        });
        bounds_group.addLayer(layer_Vas_7);
        map.addLayer(layer_Vas_7);
        function pop_Edificaciones_8(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['osm_id'] !== null ? Autolinker.link(feature.properties['osm_id'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['name'] !== null ? Autolinker.link(feature.properties['name'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['type'] !== null ? Autolinker.link(feature.properties['type'].toLocaleString(), {truncate: {length: 30, location: 'smart'}}) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_Edificaciones_8_0() {
            return {
                pane: 'pane_Edificaciones_8',
                opacity: 1,
                color: 'rgba(227,26,28,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(190,178,151,0.0)',
                interactive: true,
            }
        }
        map.createPane('pane_Edificaciones_8');
        map.getPane('pane_Edificaciones_8').style.zIndex = 408;
        map.getPane('pane_Edificaciones_8').style['mix-blend-mode'] = 'normal';
        var layer_Edificaciones_8 = new L.geoJson(json_Edificaciones_8, {
            attribution: '',
            interactive: true,
            dataVar: 'json_Edificaciones_8',
            layerName: 'layer_Edificaciones_8',
            pane: 'pane_Edificaciones_8',
            onEachFeature: pop_Edificaciones_8,
            style: style_Edificaciones_8_0,
        });
        bounds_group.addLayer(layer_Edificaciones_8);
        map.addLayer(layer_Edificaciones_8);
        var osmGeocoder = new L.Control.Geocoder({
            collapsed: true,
            position: 'topleft',
            text: 'Search',
            title: 'Testing'
        }).addTo(map);
        document.getElementsByClassName('leaflet-control-geocoder-icon')[0]
        .className += ' fa fa-search';
        document.getElementsByClassName('leaflet-control-geocoder-icon')[0]
        .title += 'Search for a place';
        var baseMaps = {};
        L.control.layers(baseMaps,{'<img src="legend/bus.png"/> Estaciones del MIO':estaciones_mio,'<img src="legend/punto.png"/> Punto': punto,'Circulo':circulo,'Poligono':poligono,'<img src="legend/Edificaciones_8.png" /> Edificaciones': layer_Edificaciones_8,'<img src="legend/Vas_7.png" /> Vías': layer_Vas_7,'<img src="legend/DatosdelSensor_6.png" /> Datos del Sensor': layer_DatosdelSensor_6,'<img src="legend/ZonaE_5.png" /> Zona E': layer_ZonaE_5,'<img src="legend/ZonaD_4.png" /> Zona D': layer_ZonaD_4,'<img src="legend/ZonaC_3.png" /> Zona C': layer_ZonaC_3,'<img src="legend/ZonaB_2.png" /> Zona B': layer_ZonaB_2,'<img src="legend/ZonaA_1.png" /> Zona A': layer_ZonaA_1,'<img src="legend/mc_comunas_1.png" /> mc_comunas': layer_mc_comunas_1,"OpenStreetMap": layer_OpenStreetMap_0,"Mapa Base 2": mapa_base,}).addTo(map);
        setBounds();
        var i = 0;
        layer_ZonaA_1.eachLayer(function(layer) {
            var context = {
                feature: layer.feature,
                variables: {}
            };
            layer.bindTooltip((layer.feature.properties['zona'] !== null?String('<div style="color: #000000; font-size: 10pt; font-weight: bold; font-style: italic; font-family: \'Times New Roman\', sans-serif;">' + layer.feature.properties['zona']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_ZonaA_1'});
            labels.push(layer);
            totalMarkers += 1;
              layer.added = true;
              addLabel(layer, i);
              i++;
        });
        var i = 0;
        layer_ZonaB_2.eachLayer(function(layer) {
            var context = {
                feature: layer.feature,
                variables: {}
            };
            layer.bindTooltip((layer.feature.properties['zona'] !== null?String('<div style="color: #000000; font-size: 10pt; font-weight: bold; font-style: italic; font-family: \'Times New Roman\', sans-serif;">' + layer.feature.properties['zona']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_ZonaB_2'});
            labels.push(layer);
            totalMarkers += 1;
              layer.added = true;
              addLabel(layer, i);
              i++;
        });
        var i = 0;
        layer_ZonaC_3.eachLayer(function(layer) {
            var context = {
                feature: layer.feature,
                variables: {}
            };
            layer.bindTooltip((layer.feature.properties['zona'] !== null?String('<div style="color: #000000; font-size: 10pt; font-weight: bold; font-style: italic; font-family: \'Times New Roman\', sans-serif;">' + layer.feature.properties['zona']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_ZonaC_3'});
            labels.push(layer);
            totalMarkers += 1;
              layer.added = true;
              addLabel(layer, i);
              i++;
        });
        var i = 0;
        layer_ZonaD_4.eachLayer(function(layer) {
            var context = {
                feature: layer.feature,
                variables: {}
            };
            layer.bindTooltip((layer.feature.properties['zona'] !== null?String('<div style="color: #000000; font-size: 10pt; font-weight: bold; font-style: italic; font-family: \'Times New Roman\', sans-serif;">' + layer.feature.properties['zona']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_ZonaD_4'});
            labels.push(layer);
            totalMarkers += 1;
              layer.added = true;
              addLabel(layer, i);
              i++;
        });
        var i = 0;
        layer_ZonaE_5.eachLayer(function(layer) {
            var context = {
                feature: layer.feature,
                variables: {}
            };
            layer.bindTooltip((layer.feature.properties['zona'] !== null?String('<div style="color: #000000; font-size: 10pt; font-weight: bold; font-style: italic; font-family: \'Times New Roman\', sans-serif;">' + layer.feature.properties['zona']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_ZonaE_5'});
            labels.push(layer);
            totalMarkers += 1;
              layer.added = true;
              addLabel(layer, i);
              i++;
        });
        resetLabels([layer_ZonaA_1,layer_ZonaB_2,layer_ZonaC_3,layer_ZonaD_4,layer_ZonaE_5]);
        map.on("zoomend", function(){
            resetLabels([layer_ZonaA_1,layer_ZonaB_2,layer_ZonaC_3,layer_ZonaD_4,layer_ZonaE_5]);
        });
        map.on("layeradd", function(){
            resetLabels([layer_ZonaA_1,layer_ZonaB_2,layer_ZonaC_3,layer_ZonaD_4,layer_ZonaE_5]);
        });
        map.on("layerremove", function(){
            resetLabels([layer_ZonaA_1,layer_ZonaB_2,layer_ZonaC_3,layer_ZonaD_4,layer_ZonaE_5]);
        });
        </script>
    </body>
</html>
